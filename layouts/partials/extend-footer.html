<script>
  function attachRandomLink() {
    async function sendToRandomArticle(e) {
      e.preventDefault();
      let data = await fetch(window.location.origin + '/index.json').then(r => r.json())
      let randIndex = Math.floor(Math.random() * data.length);
      window.location.href = data[randIndex]['permalink']
    }

    [...document.querySelectorAll("nav li > a")]
      .filter(a => a.innerText == "Random")
      .forEach(a => a.addEventListener("click", sendToRandomArticle))
  }

  document.addEventListener("DOMContentLoaded", attachRandomLink);
</script>
